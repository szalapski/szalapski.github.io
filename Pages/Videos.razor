@page "/videos"
@page "/videos/{videoId}"
@using szalapski.github.io.Components

@inject HttpClient client

<PageTitle>Szalaspki.github.io videos</PageTitle>

@if (IsLoading){
    <p>Loading...</p>
    return;
}

@if (VideoId is null){
    <h1>All videos</h1>

    <ol>
    @foreach (string id  in VideoIds)
    {
        <li><a href="videos/@id">@id</a></li>
    }
    </ol>
    return;
}

@if(VideoIds.Contains(VideoId)){
    <Video Id="@VideoId"/>
}
else {
    <p>Video/playlist with ID <pre>@VideoId</pre> not found.</p>
}



@code {
    protected override async Task OnInitializedAsync()
    {
        VideoIds = await client.GetFromJsonAsync<IEnumerable<string>>("videos.txt") ?? [];
        IsLoading = false;
    }

    [Parameter]
    public string? VideoId { get; init; } = null;

    private IEnumerable<string> VideoIds { get; set; } = [];
    private bool IsLoading { get; set; } = true;

}
